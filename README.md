코드 설명 및 목적


파일 1.
mlb vs kbo performance comparison.ipynb

목적
KBO와 MLB 리그의 타자 성적 데이터를 비교하여, 리그 간 타자 성향의 차이를 통계적으로 분석하고 시각화함으로써 본 연구의 취지를 설명하는 것에 의미가 있다.
또한 각 리그별 선수들의 군집화 차이를 보여주면서 앞으로의 연구 방향성을 바로잡고 이를 통해 이후 머신러닝 기반 분류 모델 및 타순 최적화 실험에 활용될 기초 데이터셋과 구조 분석 프레임워크를 제공하는 것이 목표이다.

설명

KBO 및 MLB 선수의 타율, 출루율, 장타율 등 주요 성적 데이터를 통합하고, 정규화하여 공정 비교 가능한 구조로 정제한다
리그 간 성과 지표 분포를 PCA 및 클러스터링(KMeans)을 통해 시각화
각 타자의 성향을 장타형, 출루형, 컨택형, 주루형으로 총 4가지 분류로 군집화
RandomForest, LogisticRegression, SVM을 활용하여 리그 분류 성능을 테스트함
리그 차이에 따른 성향 구조 및 성능 예측 가능성을 탐색



파일 2.  

20_24 Typewriter Classification Model.ipynb

목적
2020년부터 2024년까지의 KBO 타자 데이터를 기반으로, 각 타자의 성향을 자동 분류할 수 있는 클러스터링 및 분류 모델을 개발한다. 
이 성향 정보는 이후 타순 최적화 알고리즘의 전략 변수로 활용된다.

설명
KBO 리그 5년간 타자 성적(OPS, BB, HR 등)을 기반으로 성향을 정의함
Z-score 표준화 후 가중치를 부여하여 통합 성능 점수 계산
KMeans 클러스터링으로 4가지 타자 성향 유형 분류:
Power Hitter (장타형), On-base Type (출루형), Contact Type (컨택형), Speed Type (주루형)
PCA 기반 성향 시각화 및 연도별 트렌드 확인
RandomForest 기반 분류기 훈련, 향후 새로운 선수를 자동 분류 가능

결과는 .xlsx로 저장하여 향후 분석 연동 가능



파일 3
simulation by genetic algorithms.ipynb

목적
유전 알고리즘(Genetic Algorithm, GA)을 활용하여 각 팀·연도별 타자들을 대상으로 기대 득점을 극대화하는 최적의 타순을 탐색한다. 이는 실제 경기 전략 수립을 위한 데이터 기반 시뮬레이션 도구로 활용된다.

설명
팀별로 타석 수(PA) 기준 상위 9명을 추출하여 타순 조합을 구성
유전 알고리즘 구성 요소:
적합도 함수: OBP/SLG 기반 시뮬레이션 득점 평균
선택: 토너먼트
교차: 부분 순열 교차
돌연변이: 위치 스왑
각 팀에 대해 여러 세대를 반복하며 최적 타순을 진화시킴
시뮬레이션은 병렬 처리로 실행되어 성능을 최적화
최종 결과는 JSON 및 Excel로 저장되며, 전략 수립에 직접 활용 가능







[데이터 마이닝 최종 보고서]

팀: E

조원: 김승철, 이찬희 장조성, 최동근


1.프로젝트 개요  


KBO의 인기가 늘어남에 따라 야구 자체에 많은 사람들의 관심이 쏠리고 있다. 
그러나 KBO의 야구 관련 분석 능력은 MLB에 비해 현저히 떨어지는데, 이는 여러 가지 이유로 추정이 된다.  

  1) MLB보다 떨어지는 역사 

       - MLB는 1875년 / KBO는 1982년에 출범 


  2) 분석 장비와 투자 수준의 차이 

       - MLB는 고도로 전문화된 분석 장비를 활용하며 천문학적인 투자를 진행 

         그러나 KBO는 그 수준이 현저히 낮음 

 

그에 따라 KBO의 트랜드는 MLB를 늦게 나마 따라가는 형식으로 대부분 진행이 되었다. 
그래서 KBO의 독자적인 분석 툴을 만들어 더욱 효율적인 야구를 할 수 있는 배경을 만들고자 하였다. 

 
야구의 여러 가지 전략적 요소 중 본 조는 타순을 선택하였다 

타순은 야구의 득점 창출을 위한 가장 중요한 요소로써 야구의 오랜 역사 동안 계속해서 그 패러다임과 트랜드가 변해온 요소 중 하나이다. 

 

하지만 전술했듯이 KBO는 독자적인 타순 전략을 형성하지 못하고 MLB에 의존하는 경향이 있는데 이 이유로는 이렇게 추정이 된다. 


 

 1) MLB와 다른 퍼포먼스 차이 

      -MLB와 KBO 선수들의 평균 신체 스펙 차이는 크며, 이로 인해 사용하는 타격 메커니즘도 다르기 때문에 같은 선상에 놓기 적절하지 않다. 

 2) MLB와 다른 선수 풀 

      -MLB는 30개의 팀에 각각 적게는 3개, 많게는 10개 이상의 산하 팀을 보유해 수많은 인재들을 보유한 반면, KBO는 10개 팀에 각각 2개 내지 3개의 산하팀으로 이루어져 인재의 풀 자체가 매우 적다. 

 
이에 따라 KBO 내에서 가장 효율적인 타순 전략을 정립해보고 이를 실제로 적용할 수 있는 수준으로 만들어 보기 위해 이번 프로젝트를 진행했다.  









<본 프로젝트는 다음과 같은 순서로 진행되었다.>

1. kbo vs mlb를 k-means를 통해 분류

위 파일은 프로젝트를 수행한 이유와 같다.
mlb와 kbo의 차별화된 전략을 수립하기 위해선 우선 이들을 어떻게 다른 지를 확실하게 분류해야 하기 때문이다.

2. 20~24년도 타자의 분류

위 파일은 앞 서 mlb와 kbo가 어떤 경기를 선호하는 지 선수들을 통해 우선적으로 알아낸 정보들을 토대로 선수들을 분류하는 데 의미가 있다. 이 때 사용한 분류 기준은 이후 과정에서 사용될 것이다.

3. 유전 알고리즘을 통한 시뮬레이션

위 파일은 실제 선수들의 타자 수치들로 적합도 함수를 계산하고 이를 통해 야구 시뮬레이션을 가정하여 예상 득점을 산출, 이에 따라 깊이 탐색을 알고리즘을 구현하여 임의의 시뮬레이션을 돌린 이휴 최적순위 top 5를 산출한다,
4. 시뮬레이션 결과를 분류

3의 과정에서 구해진 시뮬레이션 결과로 인해 각 년도별 최적의 선수들을 2의 과정을 통해 구한 각 년도별 분류 기준에 맞춰 어떤 선수들이 어떤 순서에 배열되어있는 지를 확인한다,

+5) ootp 시뮬레이션

위의 결과가 합리적인 지 계산하기 위해 현존하는 야구 시뮬레이션 ootp를 수행하여 본다.


*) 또한 본 연구에서 사용된 논문 및 데이터셋들은 별도의 데이터 파일에 보관중이다,










2.1파일 : mlb vs kbo performance comparison.ipynb


목적: kbo vs mlb의 실제 성적 차이

 MLB와 KBO 타자의 성적 비교 및 공통 피처 정제



 2.2 데이터 통합 및 전처리

<입력 데이터>

batting_2023_data.csv // 위 파일은 mlb 선수들의 2023년도 데이터이다.

자료 출처: kaggle

kbo_dataset_2018_2024.csv 

자료 출처: kaggle


2.3 사용된 주요 성적 지표

전처리는 기본적으로 모두 소문자로 우선적으로 맞춘 이후 공통된 의미 외의 내용들은 제거, 그리고 기본적인 겉측치 제거를 통해 도출한 컬럼들은 다음과 같다.

기본 성적: player_name, team, pa, hr, bb, so, rbi, sb

타율 및 출루율 지표: batting_avg, onbase_perc, slugging_perc, onbase_plus_slugging

기본적인 컬럼명 추출 이후 남은 과정이 있다.
홈런이나 볼넷, 안타 등의 수치들은 보통 퍼센트가 아닌 정수형으로 입력이 되기 마련이다. 하지만 mlb와 kbo는 각각 경기의 수가 다르고 이에 따라 타석이 다르기 마련이다,.
또한 리그 간 타석 수 차이를 보정하기 위해 다음과 같은 파생 비율 변수를 추가로 정의하였고 이에 따라 정규화 과정 또한 가졌다.

hr_per_pa: 타석당 홈런 비율
bb_per_pa: 타석당 볼넷 비율
rbi_per_pa: 타석당 타점 비율

이러한 변수들은 이후 차원 축소(PCA) 및 리그 분류 모델 학습에 활용되었다.



<성능 점수 계산 및 PCA 분석>
타자의 종합적인 공격력을 수치화하기 위해 가중치 기반 통합 점수(Composite Score) 를 계산하였다. 


주요 변수와 가중치는 다음과 같다.

변수명					가중치
onbase_plus_slugging			0.40
slugging_perc				0.20
onbase_perc				0.20
batting_avg				0.10
hr					0.05
bb					0.05


통합 점수는 PCA 결과의 첫 번째 주성분과 상관관계를 검정하였으며, 이는 통합 지표의 타당성을 확인하는 데 활용되었다.




2.4 타자 성향 클러스터링

성향 분류를 위해 KMeans(n_clusters=4) 알고리즘을 적용하였다. 
입력 변수는 Random Forest를 통해 선택한 상위 5개의 중요 변수(onbase_plus_slugging, slugging_perc, onbase_perc, batting_avg, hr)이다.

클러스터별 해석 결과는 다음과 같다.

클러스터 번호			성향 분류명			주요 특징
0				Power Hitter (장타형)		MLB 중심
1				On-base Type (출루형)		KBO 중심
2				Contact Type (컨택형)		양 리그 혼합
3				Base running Type (주루형)	KBO에서 많이 나타남

다음 분류 기준은 앞으로도 사용할 타자들의 분류 기준이면서 동시에 야구에서 가장 많이 사용하는 타자들의 분류 기준이다.
이러한 분류는 이후 타자 성향 자동 분류 및 타순 최적화 알고리즘에서 기반으로 활용된다.



2.5 리그 분류 모델 학습

위에서 정제한 데이터를 바탕으로, 타자의 성적 지표를 입력값으로 사용하여 해당 선수가 KBO 소속인지 MLB 소속인지를 분류하는 머신러닝 모델을 학습하였다.

입력 변수: 주요 성과 지표 7종
목표 변수: 리그(KBO=0, MLB=1)

<성능 검사 알고리즘>

Random Forest Classifier
Logistic Regression
Support Vector Machine (SVM)

학습 데이터와 검증 데이터는 train_test_split을 통해 8:2 비율로 분할하였고, accuracy, precision, recall, f1-score 등의 지표를 활용해 성능을 평가하였다.
모든 모델이 성향 예측 정확도 85% 이상을 기록하였고, 그 중에서 가장 우수하면서 동시에 mlb 정보들에 과적합이 나지 않는다고 판단한 Random Forest을 모델링으로 채택하였다,\.



2.6사용 기술 스택 

데이터 처리		pandas, numpy
시각화			matplotlib, seaborn
모델링			scikit-learn (PCA, KMeans, RandomForest 등)
통계 검정		scipy.stats (피어슨 상관계수 등)



2.7요약
본 파일은 MLB와 KBO 타자 데이터를 기반으로 전처리, 성과 지표 계산, 클러스터링, 리그 분류 모델 구축까지 수행한 초기 분석 파트이다. 이를 통해 얻은 데이터 및 결과는 향후 성향 기반 자동 분류 모델 및 유전 알고리즘을 활용한 타순 최적화 실험에 있어 핵심적인 기초 자료로 활용된다.











3. 파일 2. 20_24 Typewriter Classification Model


3.1 목적 

파일 2의 목적은 2020~2024년 KBO 타자 데이터를 기반으로 각 타자의 성향(장타형, 출루형 등)을 클러스터링을 통해 분류하고, 이를 머신러닝 모델로 자동화하는 것이다. 
이 성향 분류 결과는 이후 타순 최적화 시뮬레이션(파일 3)에서 핵심 입력값으로 활용된다.



3.2 데이터 전처리 및 통합 점수 계산

입력 데이터: 20-24Year_PersonalStats_PAOver50pct.xlsx
자료 출처: 스탯티즈 

위의 자료는 우선적으로 크롤링 과정에서 정규 타석의 50%이상의 선수들로 이미 사전에 작업됐다. 그 이유는 실제 야구는 정규 선수들 라인으로만 이루어지지 않고 교체가 빈번한 만큼 최소한이 다양성을 보장해야 더욱 현실감 있는 결과가 나올 것이라고 여겼기 때문이다.




<데이터 전처리>

주요 컬럼만 선별: name, team, year, position, bb, so, avg, obp, slg, ops, sb, hr
결측값 제거 및 전처리 수행 후 총 8개 성과 지표를 선택하여 정규화(Z-score) 진행
통합 점수(Composite Score) 는 다음의 가중치를 기준으로 계산하였다.

변수명				가중치
OPS				0.40
SLG				0.20
OBP				0.20
AVG				0.10
BB				0.05
HR				0.04
SB				0.01  

여기서 도루 수치가 추가된 이후는 기존의 mlb와 다른 kbo의 유연한 컨텍형 타자들을 더욱 선별해내기 위해서 통합 점수는 PCA와 함께 시각화되며, 각 연도별로 타자 간 성향 분포가 어떻게 변해가는지를 파악하는 데 활용되었다.




3.3 타자 성향 클러스터링

타자의 성향을 자동 분류하기 위해 KMeans 클러스터링(n=4) 을 수행하였다.

입력 변수: sb, bb, so, avg, obp, slg, ops, hr
정규화 후 KMeans(n_clusters=4, random_state=42) 적용하였다.

클러스터			성향 분류명			해석 기준
0				Power Hitter (장타형)		높은 HR, SLG
1				On-base Type (출루형)		높은 BB, OBP
2				Contact Type (컨택형)		낮은 SO, 평균적 성적
3				Base running Type (주루형)	높은 SB, 빠른 발




3.4 성향 자동 분류 모델 학습
클러스터링을 통해 부여된 성향(0~3)을 타겟으로 설정하여, 주어진 타자 성적만으로 성향을 자동 예측하는 분류 모델을 학습하였다.

입력 피처: sb, bb, so, avg, obp, slg, ops, hr
타겟 라벨: 클러스터 번호 (0~3)
데이터 분할: 학습:검증 = 80:20

<성능 검사 알고리즘>
Random Forest Classifier
Logistic Regression
Support Vector Machine (SVM)

모든 모델이 성향 예측 정확도 85% 이상을 기록하였고, 특히 Random Forest의 성능이 가장 우수하였다. 이에 따라 실제 수행은  Random Forest 모델링을 채택하였다.





3.5 시각화 및 결과 저장
각 연도별로 성향 분포를 countplot으로 시각화하여 트렌드 분석에 활용하였다. 
PCA를 통해 성향별 타자 분포를 2차원 공간에 시각화하여 군집의 경향성을 확인한다.








3.6 사용 기능 및 스택

데이터 처리			pandas, numpy
시각화				matplotlib, seaborn
모델링				scikit-learn (KMeans, RF 등)
차원 축소			PCA







3.7 요약
본 파일은 2020~2024년 KBO 리그 타자 데이터를 기반으로 성향을 정량적으로 분류하고, 이 성향을 자동 분류할 수 있는 머신러닝 기반 예측 모델을 구축한 과정이다. 이 성향 라벨은 이후 유전 알고리즘 기반 타순 최적화 시뮬레이션에서 핵심 기준으로 사용된다.





















4. 데이터 및 모델 구현 (GA 기반 타순 최적화 시뮬레이션)



4.1 목적
본 분석의 목적은 각 팀의 연도별 타자 데이터를 기반으로 유전 알고리즘(Genetic Algorithm)을 적용하여 최대 기대 득점을 생성하는 최적의 타순(lineup) 을 탐색하는 것이다. 타자의 성향 분류 결과(파일 2)를 반영하고, 실제 경기 데이터를 기반으로 구성되며, 시뮬레이션을 통해 전략적으로 최적화된 타순을 산출한다.




4.2 데이터 준비 및 필터링

입력 데이터: 20-24Year_PersonalStats_PAOver50pct.xlsx

출처: 스탯티즈

주요 컬럼: year, team, name, pa, ops, avg, obp, slg, rbi, sb, hr

사전 조건
위 시뮬레이션 수행 과정에서 타석(PA) 100 이상인 선수만 필터링하였다.
사전의 정규 시즌의 50% 이상의 선수들만 필터링 할 때와 유사한 데 실질적으로 체감이 되는 시뮬레이션 결과를 얻기 위해선 실제로 타석이 최소치를 넘는 선수들을 선별할 필요가 있었고, 그 선수들의 기준은 100이라고 여겼기 때문이다.

위의 필터링 조건에 따라 20~24년도까지 총 5개년치 10개의 팀을 선수별로 분류할 때, 타석을 이루는 최소 조건(선수 9명 이상)의 조건을 채우지 못한 팀들은 자연스럽게 제거한다.
팀당 최소 9명의 선수가 있어야 타순 조합이 가능


전처리 후 구성된 팀-연도 조합 수
- 총 팀 수: 50개
- 유효한 팀(9인 이상): 44개
- 결측 선수 수: 0명

이에 따라 총 44개의 팀에 대한 시뮬레이션이 진행되었다.





4.3 시뮬레이션 설정
시뮬레이션은 다음 방식으로 분기 처리되었다.

년도별 팀별 분석 

위와 같은 방식으로 처리한 이유는 실제 경기에서 채택 가능한 방향성이면서 동시에 실제 타순과 비교할 때 유의미하기 때문이다.





4.4 유전 알고리즘 구성

기본 개념

항목					              설명
개체(individual)				    1개의 타순 배열 
유전자(gene)				          타순 안의 각 타자
적합도 함수				          해당 타순으로 시뮬레이션 시 예상 득점
세대(generation)				    여러 개체의 집합
적합도(fitness)				      calculate_fitness() 함수 결과 (득점 평균)


주요 파라미터 설정

항목					      값
세대 수					    30
개체군 크기				  50
돌연변이 확률				0.02
시뮬레이션 				  반복	200회 (9이닝 기준)
진화 구성 요소





4.5 적합도 함수 설명
타자의 OBP를 기반으로 출루 여부 결정하는 수식으로 구성했다.
SLG를 기반으로 단타~홈런까지 확률적으로 타격 종류 결정하고 이를 실제 경기 규칙(3아웃 체제)을 모방하여 9이닝 시뮬레이션 반복수행하였다.
시뮬레이션 200회 평균 득점을 해당 타순의 기대 득점으로 설정한다.




4.6 결과 저장 및 분석
각 팀-연도 조합에 대해 기대 득점이 가장 높은 타순 및 득점 기록 저하고 그 중 예상 득점이 가장 높은 상위 5개의 조합을 년도별로 정리, 이를 추후에 한 번 더 정리하는 과정을 가졌다





4.7 사용 기술 스택
데이터 처리		pandas, numpy
시뮬레이션		multiprocessing
알고리즘		유전 알고리즘 (crossover, mutate, selection)
저장			JSON, Excel





4.8 요약
본 파일은 실제 선수 데이터를 기반으로 유전 알고리즘을 활용하여 팀/연도별 최적의 타순을 도출하는 과정이다. 타자의 성향과 성과 지표를 반영한 시뮬레이션 기반 최적화로, 타순 전략 설계에 있어 정량적 근거를 제공할 수 있다. 이 결과는 성향 분류 결과(파일 2) 와 결합되어, 팀 맞춤형 전략 수립 및 경기 예측에도 활용 가능하다.


5. ootp로 인한 수행

  OOTP를 활용한 시뮬레이션 적용 

본 조는 도출해낸 결과를 어떤 방식으로 실전에 적용해볼지 많은 고민을 했었다. 
실제 야구 경기에 적용하기엔 너무나도 제약 사항이 많았기 때문에 유전 알고리즘으로 수행한 것만으로는 모자른 부분들이 존재한다고 생각했기에 이에 따라 OOTP라는 야구 시뮬레이션 게임을 활용해 보기로 했다. 

 

OOTP는 언론이나 유튜버 등 실제 야구 현장에 다가가기에 어려움이 있는 사람들이 시뮬레이션으로 많이 활용할 정도로 인지도가 있는 앱이며. 프로야구 리그가 있는 국가들의 선수 스탯을 모두 분석해 신빙성 있는 테이블을 제공한다는 평을 받고 있다. 

 

본 조는 이 시뮬레이션을 통해 2가지 정보를 취득했다. 

    1) 통상적으로 쓰이는 타순의 득점 평균치 (클래식, 동, 서양식 강한 2번, 강한 1번) 

    2) 본 조의 시뮬레이션을 적용한 타순의 득점 평균치 

 

10개의 팀의 통상 타순 4가지와 본 조의 시뮬레이션 타순 1가지를 144경기를 진행하는 KBO를 10년 동안 같은 라인업으로 돌려보면서 1년간의 평균 득점치를 계산했다. 

결론적으로 한팀 당 7,200경기를 돌려보면서 정확도를 높였다. 



  

6. 결론 



KBO는 MLB에 의해 다채로운 타자 조합, 컨택형 타자의 상대적인 비중 상승으로 인해 다른 전략을 사용했을 때 기대 득점이 더욱 많이 창출되었다. 
컨택형과 주루형 타자의 진루를 우선으로 한 후, 2 ~5번 까지의 강타자와 주루형을 섞는 방법이 예상 득점이 높게 나타났다. 
시뮬레이션적으로도 본 조에서 추출된 타순 결과가 일반적으로 사용되는 타순보다 득점 기대 값이 높게 나왔지만, 팀별로 편차가 큰 팀이 있었고, 작은 팀이 있었다. 

그 이유로는 몇 가지 이유를 들 수가 있다. 

 

     1) MLB보다 적은 타자 풀로 인해 강한 타자를 빠르게 앞 타순에서 소모할 시 뒷 타선의 과도한 약체화 

 

      2) 팀 타자들의 수준차이가 클 수록, 그리고 성향이 다른 타자들이 많을 수록 일반적인 결과와 본 팀의 시뮬레이션 득점치 차이가 크게 났다 
      

 반대로 팀 타자들의 수준 차이가 작을 수록, 그리고 성향이 같은 타자들이 많을수록 득점치 차이가 적었다 





<한계점> 

타자의 성적을 중심으로 계산했을 뿐, 다른 세부적인 데이터가 간접적으로 밖에 반영되지 않았다. 
그리고 시뮬레이션의 수 자체가 너무 적었다는 문제점도 있었다. 
연산의 양을 늘리면 늘릴수록 유의미한 값이 나올 수 있겠지만 시간, 성능상 문제로 연산 양 자체가 매우 적었으며, 이로 인해 유전 알고리즘이 효과적으로 적용되었는지 확인하기 어려웠다. 



 

<시사하는 바> 

야구는 여러 가지 요인들이 복합적으로 적용하는 스포츠이기 때문에 이 변수를 무시한 본 조의 시뮬레이션 결과는 여러 오류를 동반할 가능성이 크다. 
선수 자체의 타순 선호도, 투수의 차이, 체력, 부상, 날씨, 심리적 압박 등의 여러 요소들이 관측치를 방해하는 요소로 작용한다. 
그러나 통계는 가능성을 높여주는 학문으로써, 많은 발전을 거듭하면 분명 유의미한 결과를 낼 수 있을 것이라고 기대한다. 

